<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Network Speed Quick Check</title>
<link rel="stylesheet" href="../../css/main.css" />
<style>

.correct { color: green; font-weight: bold; }
.incorrect { color: red; font-weight: bold; }

.wordbank span {
  display: inline-block;
  background: #e0e0e0;
  padding: 5px 10px;
  margin: 5px;
  border-radius: 4px;
  color:#0f172a;
}

.score {
  font-size: 1.3rem;
  font-weight: bold;
  margin-top: 1rem;
}

</style>
</head>

<body>
<main>

<h1>⚡ Network Speed Quick Check</h1>

<!-- ================= MCQ ================= -->

<div class="section">
<h2>MCQ (5)</h2>
<div id="mcq"></div>
</div>

<!-- ================= FILL GAPS ================= -->

<div class="section">
<h2>Fill in the Gaps (5)</h2>

<p><select id="gap1"></select> is the delay between sending and receiving data.</p>

<p><select id="gap2"></select> is the maximum amount of data transmitted per second.</p>

<p>1 Byte equals <select id="gap3"></select> bits.</p>

<p>1 KiB equals <select id="gap4"></select> bytes.</p>

<p>1 Mbps equals <select id="gap5"></select> bps.</p>

<div class="wordbank" id="wordbank"></div>
<div id="gapFeedback"></div>

</div>

<!-- ================= CALCULATION ================= -->

<div class="section">
<h2>Calculation (2)</h2>

<p>
Write the expression needed to calculate the time to download
a 16 MB file using an 8 Mbps connection.
</p>

<p><strong>Formula:</strong> Time = File size ÷ Bandwidth</p>

<textarea id="calc" rows="3" cols="60"></textarea>
<div id="calcFeedback"></div>

</div>

<button onclick="markQuiz()">Mark</button>
<div class="score" id="scoreDisplay"></div>

</main>

<script>

/* ================= MCQ DATA ================= */

const mcqData = [
{
q:"1. What affects network delay?",
o:["Bandwidth","Latency","File size"],
a:"Latency"
},
{
q:"2. Which formula calculates download time?",
o:[
"Time = File size ÷ Bandwidth",
"Time = Bandwidth ÷ File size",
"Time = File size × Bandwidth"
],
a:"Time = File size ÷ Bandwidth"
},
{
q:"3. Which unit measures network speed?",
o:["MB","Mbps","MiB"],
a:"Mbps"
},
{
q:"4. How many bits are in a nibble?",
o:["2","4","8"],
a:"4"
},
{
q:"5. Which is larger?",
o:["1 byte","1 bit","1 nibble"],
a:"1 byte"
}
];

/* ================= WORD BANK ================= */

const wordBank = [
"Latency",
"Bandwidth",
"8",
"1024",
"1,000,000"
];

/* ================= GENERATE MCQ ================= */

let html="";
mcqData.forEach((m,i)=>{
html+=`<p>${m.q}</p>`;
m.o.forEach(opt=>{
html+=`<label><input type="radio" name="mcq${i}" value="${opt}">${opt}</label><br>`;
});
html+=`<div id="f${i}"></div><hr>`;
});
document.getElementById("mcq").innerHTML=html;

/* ================= WORD BANK ================= */

function populateDropdown(id){
  const select=document.getElementById(id);
  select.innerHTML="<option value=''>Select</option>";
  wordBank.forEach(word=>{
    select.innerHTML+=`<option value="${word}">${word}</option>`;
  });
}

["gap1","gap2","gap3","gap4","gap5"].forEach(populateDropdown);

document.getElementById("wordbank").innerHTML=
wordBank.map(w=>`<span>${w}</span>`).join("");

/* ================= MARKING ================= */

function markQuiz(){

let score=0;

/* ---- MCQ ---- */
mcqData.forEach((m,i)=>{
let sel=document.querySelector(`input[name="mcq${i}"]:checked`)?.value;
let fb=document.getElementById(`f${i}`);
if(sel===m.a){
    score++;
    fb.innerHTML="✔️ Correct";
    fb.className="correct";
}else{
    fb.innerHTML=`❌ Answer: ${m.a}`;
    fb.className="incorrect";
}
});

/* ---- GAPS ---- */

const gapAnswers={
gap1:"Latency",
gap2:"Bandwidth",
gap3:"8",
gap4:"1024",
gap5:"1,000,000"
};

for(let g in gapAnswers){
let val=document.getElementById(g).value;
if(val===gapAnswers[g]) score++;
}

document.getElementById("gapFeedback").innerHTML="✔️ Gaps marked.";

/* ---- CALCULATION (2 MARKS – EXPRESSION ONLY) ---- */
/* Expected: (16 × 8) ÷ 8  OR  (16*8)/8 */

let text = document.getElementById("calc").value
              .replace(/\s+/g,"")
              .toLowerCase();

let marks = 0;

/* 1 mark for MB → Mb conversion */
if(text.includes("16*8") || text.includes("16×8")){
    marks++;
}

/* 1 mark for dividing by bandwidth */
if(text.includes("/8") || text.includes("÷8")){
    marks++;
}

score += marks;

document.getElementById("calcFeedback").innerHTML =
marks === 2 ? "✔️ 2/2 – Correct expression."
: marks === 1 ? "✔️ 1/2 – Missing part of the expression."
: "❌ 0/2 – Expression should be (16 × 8) ÷ 8.";

/* ---- FINAL SCORE ---- */

document.getElementById("scoreDisplay").innerHTML=`Score: ${score}/12`;

}

</script>

</body>
</html>