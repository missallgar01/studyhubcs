<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Defragmentation Demo</title>

<style>
body{
  font-family:Arial;
  text-align:center;
  background:#f4f6f9;
}

#disk{
  width:800px;
  margin:20px auto;
  display:grid;
  grid-template-columns: repeat(20, 1fr);
  gap:4px;
}

.block{
  width:35px;
  height:35px;
  border-radius:4px;
  background:#ddd;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
  font-size:12px;
}

.file{
  background:#4CAF50;
  color:#fff;
}

.reading{
  outline:3px solid yellow;
}

#head{
  width:40px;
  height:10px;
  background:red;
  margin:10px auto;
}

button{
  margin:8px;
  padding:8px 14px;
}

#status{
  margin-top:10px;
  font-weight:bold;
}

#time{
  font-size:18px;
  margin-top:5px;
}

</style>
</head>
<body>

<h1>Disk Defragmentation Simulation</h1>

<p>File A is fragmented across the disk.</p>

<button onclick="readFile()">Read File</button>
<button onclick="defrag()">Defragment Disk</button>
<button onclick="reset()">Reset</button>

<div id="status">Ready.</div>
<div id="time"></div>

<div id="disk"></div>

<script>

const diskSize=100;
let fileBlocks=[5,22,30,55,78,90];
let blocks=[];
let readTime=0;

function createDisk(){

 const disk=document.getElementById("disk");
 disk.innerHTML="";
 blocks=[];
 readTime=0;
 document.getElementById("time").innerText="";

 for(let i=0;i<diskSize;i++){
   const div=document.createElement("div");
   div.className="block";

   if(fileBlocks.includes(i)){
     div.classList.add("file");
     div.innerText="A";
   }

   disk.appendChild(div);
   blocks.push(div);
 }

}

function readFile(){

 document.getElementById("status").innerText=
 "Reading file...";

 readTime=0;

 let i=0;

 const interval=setInterval(()=>{

   if(i<fileBlocks.length){

     const index=fileBlocks[i];

     blocks[index].classList.add("reading");

     setTimeout(()=>{
       blocks[index].classList.remove("reading");
     },300);

     readTime+=Math.abs(
       fileBlocks[i] - (fileBlocks[i-1] || 0)
     );

     i++;

   } else {
     clearInterval(interval);
     document.getElementById("status").innerText=
     "Read complete.";
     document.getElementById("time").innerText=
     "Disk head movement: "+readTime+" units";
   }

 },600);

}

function defrag(){

 document.getElementById("status").innerText=
 "Defragmenting disk...";

 let newStart=10;

 fileBlocks.forEach(i=>{
   blocks[i].classList.remove("file");
   blocks[i].innerText="";
 });

 fileBlocks=[];

 for(let i=0;i<6;i++){
   blocks[newStart+i].classList.add("file");
   blocks[newStart+i].innerText="A";
   fileBlocks.push(newStart+i);
 }

 setTimeout(()=>{
   document.getElementById("status").innerText=
   "Defragmentation complete. File stored contiguously.";
 },800);

}

function reset(){
 fileBlocks=[5,22,30,55,78,90];
 createDisk();
 document.getElementById("status").innerText="Reset complete.";
}

createDisk();

</script>

</body>
</html>