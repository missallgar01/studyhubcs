<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Round Robin Scheduling Demo</title>

<style>
body{
  font-family:Arial;
  text-align:center;
  background:#f4f6f9;
}

.container{
  width:900px;
  margin:20px auto;
}

.queue{
  display:flex;
  justify-content:center;
  gap:12px;
  margin:20px 0;
}

.process{
  width:100px;
  padding:15px;
  border-radius:10px;
  color:#fff;
  font-weight:bold;
}

.cpu{
  width:250px;
  margin:20px auto;
  padding:20px;
  background:#222;
  color:#fff;
  border-radius:12px;
  font-size:18px;
}

.timeline{
  width:100%;
  height:20px;
  background:#ddd;
  border-radius:10px;
  overflow:hidden;
  margin-top:15px;
}

.progress{
  height:100%;
  width:0%;
  background:#4CAF50;
}

button{
  padding:8px 14px;
  margin:6px;
}

#status{
  margin-top:10px;
  font-weight:bold;
}

input{
  width:60px;
}

</style>
</head>
<body>

<h1>Round Robin Scheduling</h1>

<p>
A multitasking operating system executes one process at a time but rapidly
switches between them using time slices.
</p>

<div class="container">

<label>Time Slice:
<input type="number" id="quantum" value="2" min="1">
</label>

<div class="queue" id="queue"></div>

<div class="cpu" id="cpu">CPU Idle</div>

<div class="timeline">
  <div class="progress" id="progress"></div>
</div>

<button onclick="start()">Start</button>
<button onclick="reset()">Reset</button>

<div id="status">Click Start to begin scheduling.</div>

</div>

<script>

let processes=[
  {name:"P1", time:5, color:"#4CAF50"},
  {name:"P2", time:3, color:"#2196F3"},
  {name:"P3", time:6, color:"#FF5722"},
  {name:"P4", time:4, color:"#9C27B0"}
];

let queue=[];
let running=false;

function renderQueue(){
  const q=document.getElementById("queue");
  q.innerHTML="";
  queue.forEach(p=>{
    const div=document.createElement("div");
    div.className="process";
    div.style.background=p.color;
    div.innerHTML=p.name+"<br>"+p.time+" units";
    q.appendChild(div);
  });
}

function start(){

  if(running) return;

  queue=JSON.parse(JSON.stringify(processes));
  running=true;
  document.getElementById("status").innerText=
  "Scheduling started...";

  runNext();
}

function runNext(){

  if(queue.length===0){
    document.getElementById("cpu").innerText="CPU Idle";
    document.getElementById("status").innerText=
    "All processes completed.";
    running=false;
    return;
  }

  const quantum=parseInt(document.getElementById("quantum").value);
  const current=queue.shift();

  document.getElementById("cpu").innerText=
  current.name+" running";

  let runTime=Math.min(quantum,current.time);
  let progressBar=document.getElementById("progress");
  progressBar.style.width="0%";

  let step=0;
  const steps=20;

  const interval=setInterval(()=>{
    step++;
    progressBar.style.width=(step/steps*100)+"%";

    if(step>=steps){
      clearInterval(interval);

      current.time-=runTime;

      if(current.time>0){
        queue.push(current);
      }

      renderQueue();
      runNext();
    }

  },100);

}

function reset(){
  queue=[];
  renderQueue();
  document.getElementById("cpu").innerText="CPU Idle";
  document.getElementById("progress").style.width="0%";
  document.getElementById("status").innerText="Reset complete.";
  running=false;
}

renderQueue();

</script>

</body>
</html>