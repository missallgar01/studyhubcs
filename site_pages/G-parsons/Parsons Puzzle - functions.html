<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parsons Puzzle - Username Generator</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        #puzzle-container { width: 600px; margin: 20px auto; border: 1px solid #000; padding: 10px; }
        .code-block { padding: 10px; text-align:left; margin: 5px; background-color: #f3f3f3; cursor: grab; border: 1px solid #ccc; font-family: monospace; white-space: pre-wrap; }
        .code-block.dragging { opacity: 0.5; }
        button { margin-top: 10px; padding: 8px; cursor: pointer; }
    </style>
</head>
<body>

    <h2>Parsons Puzzle - Username Generator</h2>
    <p>Arrange the code blocks in the correct order.</p>
    <div id="puzzle-container"></div>
    <button onclick="checkAnswer()">Check Answer</button>
    <p id="result"></p>

    <script>
        const correctOrder = [
            "def generate_username():",
            "    # Get user input",
            "    starting_year = input(\"Enter the starting year (e.g., 2020): \")",
            "    surname = input(\"Enter the surname: \").upper()",
            "    first_name = input(\"Enter the first name: \").upper()",
            "    year_short = starting_year[-2:]",
            "    username = year_short + surname + first_name[0]",
            "    print(\"Generated Username: \" + username)",
            "generate_username()"
        ];

        function shuffleArray(array) {
            return array.sort(() => Math.random() - 0.5);
        }

        function createPuzzle() {
            let container = document.getElementById("puzzle-container");
            container.innerHTML = "";

            let shuffledOrder = shuffleArray([...correctOrder]);
            shuffledOrder.forEach((line, index) => {
                let div = document.createElement("div");
                div.classList.add("code-block");
                div.draggable = true;
                div.textContent = line;
                div.dataset.index = index;

                div.addEventListener("dragstart", dragStart);
                div.addEventListener("dragover", dragOver);
                div.addEventListener("drop", drop);
                
                container.appendChild(div);
            });
        }

        let draggedItem = null;

        function dragStart(event) {
            draggedItem = event.target;
            event.target.classList.add("dragging");
        }

        function dragOver(event) {
            event.preventDefault();
            const container = document.getElementById("puzzle-container");
            const elements = [...container.children];
            const afterElement = elements.find(element => event.clientY < element.getBoundingClientRect().top + element.offsetHeight / 2);
            if (afterElement) {
                container.insertBefore(draggedItem, afterElement);
            } else {
                container.appendChild(draggedItem);
            }
        }

        function drop(event) {
            event.preventDefault();
            draggedItem.classList.remove("dragging");
            draggedItem = null;
        }

        function checkAnswer() {
            let blocks = document.querySelectorAll(".code-block");
            let userOrder = Array.from(blocks).map(block => block.textContent);

            if (JSON.stringify(userOrder) === JSON.stringify(correctOrder)) {
                document.getElementById("result").textContent = "✅ Correct!";
            } else {
                document.getElementById("result").textContent = "❌ Try again!";
            }
        }

        createPuzzle();
    </script>

</body>
</html>